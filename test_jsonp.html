<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>jsonp test</title>
	</head>
	<body>
		<ul id="siderList">
			
		</ul>
		<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript">
			var url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg';
			var data = {
				plateform: 'h5',
				uin: 0,
				needNewCode: 1,
				g_tk: 5381,
				inCharset: 'utf-8',
				outCharset: 'utf-8',
				notice: 0,
				format: 'jsonp'
			}
			url += (url.indexOf('?') < 0 ? '?' : '&') + param(data);
			
			
			function param(data) {
				var url = '';
				for (var k in data) {
					var value = data[k] !== undefined ? data[k] : '';
					url += `&${k}=${encodeURIComponent(value)}`;
				}
				return url ? url.substring(1) : '';
			}
			 $.ajax({
				url: "./test.php",
				data:{},  // 传递数据
				type: "GET",                                     // get/post都可以的请求方式
				async: false,                                     // 是否同步，false为异步加载        
				dataType: "jsonp",                                // 设置返回数据类型jsonp      
				jsonp: "jsonpCallback",                            // jsonp的字段，服务器返回的前缀要和这个一样
				success: function (res) {
					console.log(res);
				},
				error: function () {
					console.log('fail');
				}
			});
			
		</script>
	</body>
</html>